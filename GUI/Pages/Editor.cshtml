@page
@model EditorModel
@{
    ViewData["Title"] = "Home page";
}
@using file_organizer.Core

@* TODO: investigate using document.location.reload() to reload and preserve scroll location *@

<style>
    .file-list input {
        width: @(EditorModel.GetNumberInputWidth() + "em");
    }
</style>
<div class="header">
    <button onclick="location.replace('http:\/\/localhost:8001/directorychooser')">Cancel</button>
    <h1>File Organizer</h1>
    <button>Save</button>
</div>
<div class="text-center">
    <ol class="file-list">
        @if (EditorModel.Controller != null)
        {
            @foreach (var item in EditorModel.Controller.Entries)
            {
                @if (item.Enabled) {
                    <li>
                        <form asp-page-handler="move" method="POST" class="number-container">
                            <input type="number" name="toIndex" value="@item.Number">
                            <input type="hidden" name="fileName" value="@item.FileName">
                            <button>X</button>
                        </form>
                        <div class="item-name-container">
                            @* <p class="item-name">@item.PrettyName</p> *@
                            @item.PrettyName
                        </div>
                        <div>
                            <button class="cancel" onclick="ajaxPost(this, 'remove')">X</button>
                            <input type="hidden" name="fileName" value="@item.FileName">
                        </div>
                    </li>
                }
            }
        }
    </ol>
</div>
